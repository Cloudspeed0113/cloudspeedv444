// Enhanced data model for rebates comparison
export interface RebateRow {
  id: string
  broker: string
  brokerId: string
  brokerSlug: string
  domain: string
  instrument: string
  category: "Forex" | "Gold" | "Indices"
  spreadPips: number
  spreadCost: number
  commission: number
  rebate: number
  netCost: number
  hasAutoRebate: boolean
  trackingUrl: string
  regulation: string[]
  platforms: string[]
  instruments: string[]
  bonusType: "no-deposit" | "deposit" | "trade" | "cashback" | "loyalty" | "none"
  swapFree: boolean | "region"
  minDeposit: number
  rating: number
  // Tooltip content
  whyRecommended?: string
}

const createRow = (
  id: string,
  broker: string,
  brokerId: string,
  brokerSlug: string,
  domain: string,
  instrument: string,
  category: "Forex" | "Gold" | "Indices",
  spreadPips: number,
  commission: number,
  rebate: number,
  hasAutoRebate: boolean,
  trackingUrl: string,
  regulation: string[],
  platforms: string[],
  instruments: string[],
  bonusType: RebateRow["bonusType"],
  swapFree: boolean | "region",
  minDeposit: number,
  rating: number,
  whyRecommended?: string,
): RebateRow => {
  const spreadCost = spreadPips * 10
  const netCost = spreadCost + commission - rebate
  return {
    id,
    broker,
    brokerId,
    brokerSlug,
    domain,
    instrument,
    category,
    spreadPips,
    spreadCost,
    commission,
    rebate,
    netCost,
    hasAutoRebate,
    trackingUrl,
    regulation,
    platforms,
    instruments,
    bonusType,
    swapFree,
    minDeposit,
    rating,
    whyRecommended,
  }
}

export const rebatesData: RebateRow[] = [
  // Forex
  createRow(
    "fxpro-eurusd",
    "FxPro",
    "fxpro",
    "fxpro",
    "fxpro.com",
    "EUR/USD",
    "Forex",
    0.6,
    0,
    7,
    true,
    "https://www.fxpro.com/?ib=1234",
    ["FCA", "CySEC", "FSCA"],
    ["MT4", "MT5", "cTrader"],
    ["FX", "Gold", "Indices", "Crypto"],
    "deposit",
    true,
    100,
    4.7,
    "Top-tier FCA regulation with competitive spreads and auto rebates.",
  ),
  createRow(
    "forexcom-eurusd",
    "FOREX.com",
    "forexcom",
    "forexcom",
    "forex.com",
    "EUR/USD",
    "Forex",
    0.8,
    0,
    6,
    true,
    "https://www.forex.com/?ref=cloudspeed",
    ["FCA", "NFA", "ASIC", "CFTC"],
    ["MT4", "MT5"],
    ["FX", "Gold", "Indices"],
    "none",
    false,
    100,
    4.6,
    "Strong US regulation and established track record.",
  ),
  createRow(
    "fpmarkets-eurusd",
    "FP Markets",
    "fpmarkets",
    "fp-markets",
    "fpmarkets.com",
    "EUR/USD",
    "Forex",
    0.5,
    3,
    8,
    true,
    "https://www.fpmarkets.com/?fpm-affiliate-pcode=cloudspeed",
    ["ASIC", "CySEC"],
    ["MT4", "MT5", "cTrader"],
    ["FX", "Gold", "Indices", "Stocks"],
    "deposit",
    true,
    100,
    4.8,
    "Excellent raw spreads with ASIC regulation.",
  ),
  createRow(
    "easymarkets-eurusd",
    "easyMarkets",
    "easymarkets",
    "easymarkets",
    "easymarkets.com",
    "EUR/USD",
    "Forex",
    1.0,
    0,
    5,
    false,
    "https://www.easymarkets.com/?ref=cloudspeed",
    ["CySEC", "ASIC", "FSA"],
    ["MT4", "MT5"],
    ["FX", "Gold", "Indices", "Crypto"],
    "no-deposit",
    true,
    25,
    4.5,
    "No-deposit bonus available with swap-free accounts.",
  ),
  createRow(
    "icmarkets-eurusd",
    "IC Markets",
    "icmarkets",
    "ic-markets",
    "icmarkets.com",
    "EUR/USD",
    "Forex",
    0.4,
    3.5,
    9,
    true,
    "https://www.icmarkets.com/?camp=cloudspeed",
    ["ASIC", "CySEC", "FSA"],
    ["MT4", "MT5", "cTrader"],
    ["FX", "Gold", "Indices", "Crypto"],
    "cashback",
    "region",
    200,
    4.9,
    "Industry-leading raw spreads and highest rebate available.",
  ),
  // Gold
  createRow(
    "fxpro-gold",
    "FxPro",
    "fxpro",
    "fxpro",
    "fxpro.com",
    "XAU/USD",
    "Gold",
    1.8,
    0,
    6,
    true,
    "https://www.fxpro.com/?ib=1234",
    ["FCA", "CySEC", "FSCA"],
    ["MT4", "MT5", "cTrader"],
    ["FX", "Gold", "Indices", "Crypto"],
    "deposit",
    true,
    100,
    4.7,
    "Competitive gold spreads with FCA protection.",
  ),
  createRow(
    "icmarkets-gold",
    "IC Markets",
    "icmarkets",
    "ic-markets",
    "icmarkets.com",
    "XAU/USD",
    "Gold",
    1.2,
    3.5,
    8,
    true,
    "https://www.icmarkets.com/?camp=cloudspeed",
    ["ASIC", "CySEC", "FSA"],
    ["MT4", "MT5", "cTrader"],
    ["FX", "Gold", "Indices", "Crypto"],
    "cashback",
    "region",
    200,
    4.9,
    "Best gold spreads in the market with maximum rebate.",
  ),
  createRow(
    "fpmarkets-gold",
    "FP Markets",
    "fpmarkets",
    "fp-markets",
    "fpmarkets.com",
    "XAU/USD",
    "Gold",
    1.5,
    3,
    7,
    true,
    "https://www.fpmarkets.com/?fpm-affiliate-pcode=cloudspeed",
    ["ASIC", "CySEC"],
    ["MT4", "MT5", "cTrader"],
    ["FX", "Gold", "Indices", "Stocks"],
    "deposit",
    true,
    100,
    4.8,
    "Strong ASIC regulation with good gold spreads.",
  ),
  createRow(
    "easymarkets-gold",
    "easyMarkets",
    "easymarkets",
    "easymarkets",
    "easymarkets.com",
    "XAU/USD",
    "Gold",
    2.5,
    0,
    4,
    false,
    "https://www.easymarkets.com/?ref=cloudspeed",
    ["CySEC", "ASIC", "FSA"],
    ["MT4", "MT5"],
    ["FX", "Gold", "Indices", "Crypto"],
    "no-deposit",
    true,
    25,
    4.5,
    "Low minimum deposit with swap-free gold trading.",
  ),
  // Indices
  createRow(
    "fxpro-us30",
    "FxPro",
    "fxpro",
    "fxpro",
    "fxpro.com",
    "US30",
    "Indices",
    2.0,
    0,
    4,
    true,
    "https://www.fxpro.com/?ib=1234",
    ["FCA", "CySEC", "FSCA"],
    ["MT4", "MT5", "cTrader"],
    ["FX", "Gold", "Indices", "Crypto"],
    "deposit",
    true,
    100,
    4.7,
    "Reliable index trading with FCA protection.",
  ),
  createRow(
    "icmarkets-us500",
    "IC Markets",
    "icmarkets",
    "ic-markets",
    "icmarkets.com",
    "US500",
    "Indices",
    0.4,
    3,
    5,
    true,
    "https://www.icmarkets.com/?camp=cloudspeed",
    ["ASIC", "CySEC", "FSA"],
    ["MT4", "MT5", "cTrader"],
    ["FX", "Gold", "Indices", "Crypto"],
    "cashback",
    "region",
    200,
    4.9,
    "Tight index spreads with high rebate return.",
  ),
  createRow(
    "forexcom-us30",
    "FOREX.com",
    "forexcom",
    "forexcom",
    "forex.com",
    "US30",
    "Indices",
    1.5,
    0,
    3,
    true,
    "https://www.forex.com/?ref=cloudspeed",
    ["FCA", "NFA", "ASIC", "CFTC"],
    ["MT4", "MT5"],
    ["FX", "Gold", "Indices"],
    "none",
    false,
    100,
    4.6,
    "US-regulated broker for index trading.",
  ),
]

export interface TopRatedBroker {
  name: string
  slug: string
  rating: number
  domain: string
}

export const topRatedBrokers: TopRatedBroker[] = [
  { name: "IC Markets", slug: "ic-markets", rating: 4.9, domain: "icmarkets.com" },
  { name: "FP Markets", slug: "fp-markets", rating: 4.8, domain: "fpmarkets.com" },
  { name: "FxPro", slug: "fxpro", rating: 4.7, domain: "fxpro.com" },
]

// Unique brokers for broker cards section
export const uniqueBrokers = [
  {
    id: "ic-markets",
    name: "IC Markets",
    domain: "icmarkets.com",
    regulation: ["ASIC", "CySEC", "FSA"],
    platforms: ["MT4", "MT5", "cTrader"],
    instruments: ["FX", "Gold", "Indices", "Crypto"],
    bonusType: "cashback" as const,
    swapFree: "region" as const,
    minDeposit: 200,
    rating: 4.9,
    hasAutoRebate: true,
    spreadEurusd: 0.4,
    spreadGold: 1.2,
    maxRebate: 9,
    trackingUrl: "https://www.icmarkets.com/?camp=cloudspeed",
  },
  {
    id: "fp-markets",
    name: "FP Markets",
    domain: "fpmarkets.com",
    regulation: ["ASIC", "CySEC"],
    platforms: ["MT4", "MT5", "cTrader"],
    instruments: ["FX", "Gold", "Indices", "Stocks"],
    bonusType: "deposit" as const,
    swapFree: true,
    minDeposit: 100,
    rating: 4.8,
    hasAutoRebate: true,
    spreadEurusd: 0.5,
    spreadGold: 1.5,
    maxRebate: 8,
    trackingUrl: "https://www.fpmarkets.com/?fpm-affiliate-pcode=cloudspeed",
  },
  {
    id: "fxpro",
    name: "FxPro",
    domain: "fxpro.com",
    regulation: ["FCA", "CySEC", "FSCA"],
    platforms: ["MT4", "MT5", "cTrader"],
    instruments: ["FX", "Gold", "Indices", "Crypto"],
    bonusType: "deposit" as const,
    swapFree: true,
    minDeposit: 100,
    rating: 4.7,
    hasAutoRebate: true,
    spreadEurusd: 0.6,
    spreadGold: 1.8,
    maxRebate: 7,
    trackingUrl: "https://www.fxpro.com/?ib=1234",
  },
  {
    id: "forexcom",
    name: "FOREX.com",
    domain: "forex.com",
    regulation: ["FCA", "NFA", "ASIC", "CFTC"],
    platforms: ["MT4", "MT5"],
    instruments: ["FX", "Gold", "Indices"],
    bonusType: "none" as const,
    swapFree: false,
    minDeposit: 100,
    rating: 4.6,
    hasAutoRebate: true,
    spreadEurusd: 0.8,
    spreadGold: 2.0,
    maxRebate: 6,
    trackingUrl: "https://www.forex.com/?ref=cloudspeed",
  },
  {
    id: "easymarkets",
    name: "easyMarkets",
    domain: "easymarkets.com",
    regulation: ["CySEC", "ASIC", "FSA"],
    platforms: ["MT4", "MT5"],
    instruments: ["FX", "Gold", "Indices", "Crypto"],
    bonusType: "no-deposit" as const,
    swapFree: true,
    minDeposit: 25,
    rating: 4.5,
    hasAutoRebate: false,
    spreadEurusd: 1.0,
    spreadGold: 2.5,
    maxRebate: 5,
    trackingUrl: "https://www.easymarkets.com/?ref=cloudspeed",
  },
]

// Top picks derived from data
export const topPicks = {
  bestForGold: rebatesData
    .filter((r) => r.category === "Gold")
    .sort((a, b) => a.netCost - b.netCost)
    .slice(0, 3),
  bestForForex: rebatesData
    .filter((r) => r.category === "Forex" && r.instrument === "EUR/USD")
    .sort((a, b) => a.netCost - b.netCost)
    .slice(0, 3),
  lowestNetCost: [...rebatesData].sort((a, b) => a.netCost - b.netCost).slice(0, 3),
}
